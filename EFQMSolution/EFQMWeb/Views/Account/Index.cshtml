

@using EFQMWeb.Common.Util;
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/css/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/css/jquery-ui/jquery-ui.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Content/js/jquery-1.9.1.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/js/jquery-ui-1.10.2.custom.min.js")" type="text/javascript"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="@Url.Content("~/Content/js/api-framework.js")?@MyConfig.GetSetting("LinkedFilesVesion")" type="text/javascript"></script>
    @Html.Partial("JavascriptInjection")
    
    <script language="javascript" type="text/javascript">

        $(function () {



            var success = function (ctx, data) {
                window.location= "@Url.Action("Index","Home")";
            };

            var error = function (context, jqXHR, textStatus, response) {
                if(context.action=="login"){
                    API.Design.fadeMessage.open("Neispravni podaci!");
                }else if(context.action=="register"){
                    if(response.Status==2){
                        API.Design.fadeMessage.open("Već postoji korisnik sa istim e-mailom i zaporkom");
                    }
                    else{
                        API.Design.fadeMessage.open("Greška");
                    }
                }
            };

            var complete = function () {

            };

            $(".button.login").click(function (e) {
                var container = $(this).parents(".form-container:first");
                if(!API.Functions.checkRequired(container)){
                    API.Design.fadeMessage.open("Molimo upišite email i zaporku");
                    return;
                }
                API.Ajax.PostJson(API.Communication.url + "account/logon", API.Functions.gatherData(container), {action: "login"}, null, success, error, complete);
            });

            $(".button.register").click(function (e) {

                var container = $(this).parents(".form-container:first");
                if(!API.Functions.checkRequired(container)){
                    API.Design.fadeMessage.open("Molimo popunite obavezna polja");
                    return;
                }
                var data =API.Functions.gatherData(container);
                
                if(data.Password!= data.Password2){
                    API.Design.fadeMessage.open("Zaporka i ponovljena zaporka nisu iste!");
                    return;
                }
                
                
                API.Ajax.PostJson(API.Communication.url + "account/register", data, {action: "register"}, null, success, error, complete);
            });

        });

    </script>
    
</head>
<body class="login-register">
    <header class="header">
        <div class="wrapper">
            <a href="http://www.huog.hr/">
                <img class="logo" src="/content/img/logo-hr.png" alt="CROATIAN ASSOCIATION FOR CONTRUCTION MANAGEMENT">
            </a>

            <img src="/content/img/in-logo.png" alt="in" class="in-logo">
            <div class="clear"></div>
        </div>
    </header>
    <div class="page">
        <div id="main" class="main">
            <div class="login form-container">
                <fieldset>
                    <legend>Prijava postojećih korisnika</legend>
                    <div class="row">
                        <span class="label">Email:</span><input type="text" name="Email" id="Email" class="required" />
                    </div>
                    <div class="row">
                        <span class="label">Zaporka:</span><input type="password" name="Password" id="Password" class="required" />
                    </div>
                    <div class="row">
                        <span class="label">Zapamti me:</span><input type="checkbox" name="RemeberMe" id="RememberMe" />
                    </div>
                    <div class="action-bar">
                        <input type="submit" id="Login" class="button login" value="Prijava"/>
                    </div>
                </fieldset>
                
            </div>
            
            <div class="register form-container">
                <fieldset>
                    <legend>Registracija novih korisnika</legend>
                <div class="row">
                    <span class="label">Email(*):</span><input type="text" name="Email" id="Email" class="required" />
                </div>
                <div class="row">
                    <span class="label">Zaporka(*):</span><input type="password" name="Password" id="Password" class="required" />
                </div>
                <div class="row">
                    <span class="label">Ponovite zaporku(*):</span><input type="password" name="Password2" id="Password2" class="required" />
                </div>
                <div class="row">
                    <span class="label">Naziv firme:</span><input type="text" name="Company" id="Company" />
                </div>
                <div class="row">
                    <span class="label">Grad:</span><input type="text" name="City" id="City" />
                </div>
                <div class="row">
                    <span class="label">Vrsta(*):</span>
                    <select id="Type" class="required">
                        <option value="">Odaberite vrstu</option>
                        <option value="INV">Investitor</option>
                        <option value="KON">Konzultant</option>
                        <option value="IZV">Izvođač</option>
                    </select>
                </div>
                <div class="row">
                    <span class="label">Broj zaposlenih:</span>
                    <select id="Employee">
                        <option value="">Odaberite</option>
                        <option value="0-9">0-9</option>
                        <option value="10-49">10-49</option>
                        <option value="50-249">50-249</option>
                        <option value="250+">250 +</option>
                    </select>
                </div>
                <div class="row">
                    <span class="label">Prihod:</span>
                    <select name="Income" id="Income">
                        <option value="">Odaberite</option>
                        <option value="10">mikro - do 10 Mio EUR</option>
                        <option value="50">mala - do 50 Mio EUR</option>
                        <option value="250">srednja - do 250 Mio EUR</option>
                        <option value="251">velika - od 250 Mio EUR</option>
                    </select>
                </div>
                <div class="row">
                    <span class="label">Newsletter:</span><input type="checkbox" name="Newsletter" id="Newsletter" />
                </div>
                <div class="action-bar">
                    <input type="submit" id="Register" class="button register" value="Registracija"/>
                </div>
                </fieldset>
            </div>
            
            <div class="clear"></div>
        </div>
        <div id="footer">
        </div>
    </div>
    @Html.Partial("SharedElements")
</body>
</html>
